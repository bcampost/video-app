/* ========= PALETA (lee tus variables globales si existen) ========= */
:root {
  --mq-z: 1300;

  /* Usa tus tokens si ya los tienes definidos en la app */
  --mq-accent:   var(--accent-color, #22c55e);
  --mq-bg:       var(--panel-bg, #0f172a);          /* Fondo del drawer (oscuro) */
  --mq-text:     var(--panel-text, #e5e7eb);        /* Texto */
  --mq-border:   var(--border-color, rgba(255,255,255,.08));
  --mq-backdrop: var(--backdrop-color, rgba(0,0,0,.55));

  /* Rail derecho en vista media (puedes mapear a tu sidebar-bg) */
  --mq-rail-bg:    var(--sidebar-bg, #0e1a2b);
  --mq-rail-text:  var(--sidebar-text, #d1d5db);
  --mq-rail-hover: rgba(255,255,255,.06);
}

/* ========= FAB (móvil) ========= */
.mq-fab {
  position: fixed;
  right: calc(16px + env(safe-area-inset-right));
  bottom: calc(16px + env(safe-area-inset-bottom));
  z-index: calc(var(--mq-z) - 1);
  appearance: none;
  border: 0;
  border-radius: 999px;
  background: var(--mq-accent);
  color: #fff;
  font-weight: 700;
  padding: 10px 14px;
  box-shadow: 0 8px 24px rgba(0,0,0,.35);
  cursor: pointer;
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
}
.mq-fab:hover { transform: translateY(-1px); }
.mq-fab:focus-visible { outline: 3px solid #c7d2fe; outline-offset: 2px; }

/* Ocultar FAB en >=769px */
@media (min-width: 769px) {
  .mq-fab { display: none; }
}

/* ========= RAIL DERECHO (vista media) ========= */
.mq-rail {
  position: fixed;
  right: 0;
  top: 0;
  bottom: 0;
  width: 56px;
  background: var(--mq-rail-bg);
  color: var(--mq-rail-text);
  border-left: 1px solid var(--mq-border);
  display: none; /* visible sólo en md */
  align-items: center;
  justify-content: center;
  z-index: 1290; /* por debajo del overlay (1300) */
}
.mq-rail-btn {
  appearance: none;
  border: 0;
  background: transparent;
  color: inherit;
  writing-mode: vertical-rl;
  transform: rotate(180deg); /* texto vertical legible */
  padding: 10px 6px;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 700;
  letter-spacing: .08em;
}
.mq-rail-btn:hover { background: var(--mq-rail-hover); }
.mq-rail-btn:focus-visible { outline: 2px solid var(--mq-accent); outline-offset: 2px; }
.mq-rail-text { margin-top: 6px; font-size: .9rem; }

/* Mostrar rail sólo en 769–1199 px */
@media (min-width: 769px) and (max-width: 1199px) {
  .mq-rail { display: flex; }
}

/* ========= OVERLAY + DRAWER ========= */
.mq-overlay {
  position: fixed;
  inset: 0;
  z-index: var(--mq-z);
  background: var(--mq-backdrop);
  animation: mq-fade-in .18s ease-out both;
}

.mq-drawer {
  --w: min(92vw, 420px);
  position: absolute;
  top: 0;
  right: 0;
  width: var(--w);
  max-width: 100vw;
  height: 100dvh;
  background: var(--mq-bg);
  color: var(--mq-text);
  border-left: 1px solid var(--mq-border);
  box-shadow: -8px 0 24px rgba(0,0,0,.35);
  display: flex;
  flex-direction: column;
  transform: translateX(100%);
  animation: mq-slide-in .22s cubic-bezier(.2,.8,.2,1) forwards;
  overscroll-behavior: contain;
}

/* ultra-estrecho: ocupa todo el ancho */
@media (max-width: 360px) {
  .mq-drawer { --w: 100vw; border-left: none; }
}

/* ========= HEADER ========= */
.mq-header {
  position: sticky;
  top: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: calc(12px + env(safe-area-inset-top)) 12px 12px 16px;
  background: linear-gradient(180deg, rgba(255,255,255,.03), transparent);
  border-bottom: 1px solid var(--mq-border);
  z-index: 1;
}
.mq-title { margin: 0; font-size: 1rem; font-weight: 700; }

.mq-close {
  appearance: none;
  border: 0;
  background: transparent;
  color: var(--mq-text);
  font-size: 20px;
  line-height: 1;
  padding: 8px;
  border-radius: 10px;
  cursor: pointer;
}
.mq-close:hover { background: rgba(255,255,255,.06); }
.mq-close:focus-visible { outline: 2px solid var(--mq-accent); outline-offset: 2px; }

/* ========= BODY ========= */
.mq-body {
  min-height: 0;
  flex: 1 1 auto;
  overflow: auto;
  padding: 12px 12px calc(16px + env(safe-area-inset-bottom));
  background: transparent; /* dejamos que tu tarjeta blanca viva aquí */
}

/* ========= FIX: la lista se ocultaba <769px por estilos globales ========= */
@media (max-width: 768.98px) {
  .mq-drawer .queue-panel,
  .mq-drawer .queue-panel-list,
  .mq-drawer #queue-panel,
  .mq-drawer [class*="queue"],
  .mq-drawer [data-queue] {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    height: auto !important;
  }
}

/* ========= Animaciones ========= */
@keyframes mq-slide-in {
  from { transform: translateX(100%); }
  to   { transform: translateX(0); }
}
@keyframes mq-fade-in {
  from { opacity: 0; }
  to   { opacity: 1; }
}

/* Respeta preferencias */
@media (prefers-reduced-motion: reduce) {
  .mq-overlay, .mq-drawer { animation: none; }
}
